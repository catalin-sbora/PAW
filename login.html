<html>
	<head>
		<link rel="stylesheet" href="css/bootstrap.css">
		<link rel="stylesheet" href="css/bootstrap-theme.css">
		<link rel="stylesheet" href="css/main.css">
	</head>
	<body>
		<div class="row">
			<div class="col-md-4 col-md-offset-4">
				<div class="panel panel-default">

					<div class="panel-body" style="height: 135px; background-color: #eeeeee;">
							<br/>
							<img class="centered-medalion" src="data:image/jpeg;base64,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"/>
					</div>

					<div class="panel-body">
						<br/>
						<form id="frmLogin" name="frmLogin" role="form"
							action="backendapi/authorize.php" method="POST"
							enctype="application/x-www-form-urlencoded">
							<fieldset>
								<div class="form-group">
									<input class="form-control" type="text" autocomplete="off" value="" placeholder="Username" name="user"
										autofocus>
										<input type="text" style="display:none"/>
								</div>
								<div class="form-group">
									<input type="password" style="display:none"/>
									<input class="form-control" placeholder="Password"
										name="password" type="password" value="">
								</div>
								<div class="checkbox">
									<label> <input name="remember" type="checkbox"
										value="Remember Me">Remember Me
									</label>
								</div>
								<!-- Change this to a button or input when using this as a form -->
								<!--   <a href="index.php" class="btn btn-lg btn-success btn-block">Login</a> -->
								<input type="submit" class="btn btn-primary" value="Login" />
							</fieldset>
						</form>

					</div>
					<div id="statusText" name="statusText" class="hidden-content">
						Authentication Failed.
					</div>
					<br/>

				</div> <!-- end div panel panel-default-->
			</div> <!-- End div col md-4 -->
		</div>	 <!--End div class row -->
		
		<script src="js/libs/jquery-1.11.0.min.js"/>
		<script src="js/bootstrap.js"/>
		<script src="js/libs/jquery.forms.js"/>
		<script src="js/libs/jquery.cookies.js"/>
		<script>
			$(document).ready(function() { 

					$.cookie("app_token","0",{expires : 10});
					var options = { 
									beforeSubmit:  showRequest,  // pre-submit callback 
									success:       showResponse  // post-submit callback 

					// other available options: 
					//url:       url         // override for form's 'action' attribute 
					//type:      type        // 'get' or 'post', override for form's 'method' attribute 
					//dataType:  null        // 'xml', 'script', or 'json' (expected server response type) 
					//clearForm: true        // clear all form fields after successful submit 
					//resetForm: true        // reset the form after successful submit 

					// $.ajax options can be used here too, for example: 
					//timeout:   3000 
				}; 


				// bind to the form's submit event 
				$('#frmLogin').submit(function() { 
					// inside event callbacks 'this' is the DOM element so we first 
					// wrap it in a jQuery object and then invoke ajaxSubmit 
					$(this).ajaxSubmit(options); 

					// !!! Important !!! 
					// always return false to prevent standard browser submit and page navigation 
					return false; 
				}); 
			}); // document.ready function

			// pre-submit callback 
			function showRequest(formData, jqForm, options) 
			{   
				return true; 
			} 
			
			function tryParseJSON (jsonString)
			{
				try {
					var o = JSON.parse(jsonString);

					// Handle non-exception-throwing cases:
					// Neither JSON.parse(false) or JSON.parse(1234) throw errors, hence the type-checking,
					// but... JSON.parse(null) returns 'null', and typeof null === "object", 
					// so we must check for that, too.
					if (o && typeof o === "object" && o !== null) {
						return o;
					}
				}
				catch (e) { //handle exception here
				}

				return false;
			};


			// post-submit callback 
			function showResponse(responseText, statusText, xhr, $form)  
			{ 
				var response = tryParseJSON(responseText);
				if (response)
				{
					if (response.status == 'ok')
					{
						//setCookie('rs_token',response.token, 1);
						$.cookie('app_token',response.token, {expires : 1});
						window.location.replace("index.php");

					}
					else
					{
						document.getElementById("statusText").className='visible-content';
					}
				}
				else
				{
					document.getElementById("statusText").className='visible-content';
				}	   	     
			}
		</script>
	</body>
	
</html>